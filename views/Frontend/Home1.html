
<style>
  div{
    margin: 0px !important;
    padding: 0px !important;
  }
  .btn-body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 15vh;
      /* margin-bottom: 20px; */
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #1f1f1f, #020a2bf5);
    }

    .buy-button {
      position: relative;
      display: inline-block;
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      color: #fff;
      text-transform: uppercase;
      text-align: center;
      border: none;
      background: linear-gradient(90deg, #00c853, #64dd17);
      border-radius: 50px;
      cursor: pointer;
      outline: none;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .buy-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: width 0.4s ease-in-out;
      border-radius: 50px;
    }

    .buy-button:hover::before {
      width: 100%;
    }

    .buy-button:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
    }
  .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: #333;
      color: white;
    }
    .navbar .profile {
      display: flex;
      align-items: center;
    }
    .navbar .profile img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }
    .navbar .wallet {
      font-weight: bold;
    }
</style>
<div> 
  <header class="navbar">
    <!-- Left side: Profile -->
    <div class="profile">
      <img src="/assets/img/bg7.jpg" width="42px" height="42px" style="border-radius: 50%; border: 1px solid white;" alt="Profile Picture">
      <span id="username">John Doe</span>
    </div>

    
    <!-- Right side: Wallet Balance -->
    <div class="wallet" id="amountId">
      Wallet Balance: 00.00
    </div>
  </header></div>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <!-- <div class="tradingview-widget-copyright">Quotes</span></a> by TradingView</div> -->
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-tickers.js" async>
  {
  "symbols": [
    {
      "description": "",
      "proName": "COINBASE:BTCUSD"
    },
    {
      "description": "",
      "proName": "COINBASE:ETHUSD"
    },
    {
      "description": "",
      "proName": "BINANCE:IOTAUSD"
    }
  ],
  "colorTheme": "dark",
  "isTransparent": false,
  "locale": "en"
}
  </script>
  
</div>

<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <!-- <div class="tradingview-widget-copyright">Ticker Tape</span></a> by TradingView</div> -->
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
  {
  "symbols": [
    {
      "description": "",
      "proName": "COINBASE:BTCUSD"
    },
    {
      "description": "",
      "proName": "COINBASE:ETHUSD"
    },
    {
      "description": "",
      "proName": "BINANCE:IOTAUSD"
    }
  ],
  "colorTheme": "dark",
  "isTransparent": false,
  "displayMode": "adaptive",
  "locale": "en"
}
  </script>
</div>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div class="tradingview-widget-container__widget"></div>
  <!-- <div class="tradingview-widget-copyright">IOTUSD Rates</span></a> by TradingView</div> -->
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
  {
  "symbol": "BINANCE:IDEXUSD",
  "width": "100%",
  "height": "100%",
  "locale": "en",
  "dateRange": "12m",
  "colorTheme": "dark",
  "trendLineColor": "rgba(164, 194, 244, 1)",
  "underLineColor": "rgba(201, 218, 248, 0.15)",
  "isTransparent": false,
  "autosize": true,
  "largeChartUrl": ""
}
  </script>
</div>
<!-- TradingView Widget END -->
 
 
<div class="tradingview-widget-container">
  <div id="tradingview_74048"></div>
  <!-- <div class="tradingview-widget-copyright"><span class="blue-text">IOTUSD Chart</span></a> by TradingView</div> -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
  new TradingView.widget(
  {
  "autosize": true,
  "symbol": "BINANCE:IOTAUSD",
  "interval": "D",
  "timezone": "Europe/Zurich",
  "theme": "Dark",
  "style": "1",
  "locale": "en",
  "toolbar_bg": "#f1f3f6",
  "enable_publishing": false,
  "hide_side_toolbar": false,
  "allow_symbol_change": true,
  "studies": [
    "RSI@tv-basicstudies",
    "StochasticRSI@tv-basicstudies"
  ],
  "container_id": "tradingview_74048"
}
  );
  </script>
</div> <div class="btn-body">
  <button class="buy-button" onclick="redirectToHome()">BUY UP</button>
</div>

<script>
  function redirectToHome() {
    // Redirects to the home2 page
    window.location.href = '/home2';
  }  
    

  const checkTokenAndRedirect = () => {
        const token = localStorage.getItem('jwtToken1');
        // console.log(token)
        if (!token) {
            window.location.href = "/";
        }
    };

    // Call the token check on page load
    window.onload = checkTokenAndRedirect;

  </Script>
  <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>

  <script>
    
    document.addEventListener('DOMContentLoaded', async () => {
      const fetchProfileDataofname = async () => {
        try {

          const username = document.getElementById('username');
          const amountId = document.getElementById('amountId');
  
          // Fetch token from local storage
          const token = localStorage.getItem('jwtToken1');
          if (!token) {
            console.error("Token not found. Redirecting to login...");
            window.location.href = '/';
            return;
          }
  
          // Decode the token to get the user ID
          const decodedToken = jwt_decode(token);
          console.log("Decoded Token:", decodedToken); // Debugging
          const userId = decodedToken.id;
  
          // Fetch user data
          const response = await fetch(`https://btuexchange.in/back/fetchCompanyName/${userId}`);
          if (!response.ok) {
            console.error("Failed to fetch user data. Status:", response.status);
            amountId.textContent = "Failed to load wallet amount.";
            username.textContent = "Failed to load username.";
            return;
          }
  
          const data = await response.json();
          console.log("Fetched Data:", data); // Debugging
  
          // Ensure the expected keys exist
          if (data.name) {
           
            username.textContent = data.name;
            amountId.textContent = `Wallet: ${data.amount}`;
          } else {
            console.error("Data format is unexpected:", data);
            amountId.textContent = "Invalid data.";
            username.textContent = "Invalid data.";
          }
        } catch (error) {
          console.error("Error fetching profile data:", error.message);
        }
      };
  
      // Call the function
      await fetchProfileDataofname();
    });
  </script>
  